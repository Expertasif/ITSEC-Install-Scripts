#!/bin/bash

bold=$(tput bold)
normal=$(tput sgr0)

echo "${bold}
  ____  ___  _     ___ ____  __  __ _____ ____   ___  
 / ___|/ _ \| |   |_ _/ ___||  \/  | ____|  _ \ / _ \ 
| |  _| | | | |    | |\___ \| |\/| |  _| | |_) | | | |
| |_| | |_| | |___ | | ___) | |  | | |___|  _ <| |_| |
 \____|\___/|_____|___|____/|_|  |_|_____|_| \_\\___/ 
             
${normal}"

mkdir -p /opt/ITSEC/2.Vulnerability-Scanner/golismero/golismero
cd /opt/ITSEC/2.Vulnerability-Scanner/golismero/golismero
git clone https://github.com/golismero/golismero.git

GITREPOROOT=/opt/ITSEC/2.Vulnerability-Scanner/golismero/golismero/golismero
GITREPOGITFILE=$GITREPOROOT/.git
DSKTPFLS=/opt/ITSEC-Install-Scripts/0.Initial/usrlcl/.local/share/applications/2.Vulnerability-Scanner
DSKTPFLSDEST=/home/$USER/.local/share/applications/2.Vulnerability-Scanner
DSKTPFL=golismero.desktop

EXECUTEABLE1=golismero.py
EXECUTEABLE2=golismero

sudo rm -f /usr/local/bin/golismero

cd $GITREPOROOT
git clean -f
git fetch origin
git reset --hard origin/master
git pull
git submodule init
git submodule update --recursive
chmod +x /opt/ITSEC/2.Vulnerability-Scanner/golismero/golismero/golismero/golismero.py

sudo ln -s /opt/ITSEC/2.Vulnerability-Scanner/golismero/golismero/golismero/golismero.py /usr/local/bin/golismero
rm -f $DSKTPFLSDEST/$DSKTPFL
mkdir -p $DSKTPFLSDEST 
cp $DSKTPFLS/$DSKTPFL $DSKTPFLSDEST/$DSKTPFL



