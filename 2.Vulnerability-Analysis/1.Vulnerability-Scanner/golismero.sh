#!/bin/bash

mkdir -p /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/golismero/golismero
cd /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/golismero/golismero
git clone https://github.com/golismero/golismero.git

sudo ldconfig
sudo updatedb

GITREPOROOT=/opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/golismero/golismero/golismero

EXECUTEABLE1=golismero.py
EXECUTEABLE2=golismero

cd $GITREPOROOT

DSKTPFLS=/opt/ITSEC-Install-Scripts/0.Initial/usrlcl/.local/share/applications/2.Vulnerability-Analysis/1.Vulnerability-Scanner
DSKTPFLSDEST=/home/$USER/.local/share/applications/2.Vulnerability-Analysis/1.Vulnerability-Scanner
DSKTPFL=golismero.desktop

sudo rm -f /usr/local/bin/golismero

git clean -f
git fetch origin
git reset --hard origin/master
git pull
git submodule init
git submodule update --recursive
chmod +x /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/golismero/golismero/golismero/golismero.py

sudo ln -s /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/golismero/golismero/golismero/golismero.py /usr/local/bin/golismero
mkdir -p $DSKTPFLSDEST 
cp $DSKTPFLS/$DSKTPFL $DSKTPFLSDEST/$DSKTPFL
sudo updatedb


