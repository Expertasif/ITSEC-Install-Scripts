#!/bin/bash

mkdir -p /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/w3af/andresriancho
cd /opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/w3af/andresriancho
git clone https://github.com/andresriancho/w3af.git

sudo ldconfig
sudo updatedb

GITREPOROOT=/opt/ITSEC/2.Vulnerability-Analysis/1.Vulnerability-Scanner/w3af/andresriancho/w3af
EXECUTEABLE1=w3af_console
EXECUTEABLE1GUI=w3af_gui

sudo -H pip2 install  pyopenSSL==17.0.0 joe  PyGithub GitPython futures pyOpenSSL lxml scapy-real guess-language ruamel.ordereddict tldextract

sudo rm /usr/local/bin/$EXECUTEABLE1
sudo rm /usr/local/bin/$EXECUTEABLE1GUI

cd $GITREPOROOT
git clean -f
git fetch origin
git reset --hard origin/master
git pull
git submodule init 
git submodule update --recursive

sudo ln -s $GITREPOROOT/$EXECUTEABLE1 /usr/local/bin/$EXECUTEABLE1

sudo ln -s $GITREPOROOT/$EXECUTEABLE1 /usr/local/bin/$EXECUTEABLE1GUI


#cd /opt/ITSEC/7.Mitm/7.Mitm/mitmproxy python-git python3-git
#sudo apt-get purge --remove python-enum34
#sudo -H pip2 install enum34 twisted


