#!/bin/bash

mkdir -p /opt/ITSEC/2.Vulnerability-Analysis/2.Cisco-Tools//cisco-torch/foreni-packages
cd /opt/ITSEC/2.Vulnerability-Analysis/2.Cisco-Tools/cisco-torch/foreni-packages
git clone https://github.com/foreni-packages/cisco-torch.git


#doesent work
#https://stackoverflow.com/questions/5939696/installing-net-ssh-perl-pm

sudo udpatedb
sudo ldconfig
GITREPOROOT=/opt/ITSEC/2.Vulnerability-Analysis/2.Cisco-Tools/cisco-torch/foreni-packages/cisco-torch
EXECUTEABLE1=cisco-torch.pl
EXECUTEABLE2=ciscoTORCH

cd $GITREPOROOT
sudo rm /usr/local/bin/$EXECUTEABLE2

sudo updatedb
sudo ldconfig
git clean -f 
git pull
git submodule init
git submodule update --recursive

#echo "#!/bin/bash
#cd /opt/ITSEC/2.Vulnerability-Analysis/2.Cisco-Tools/cisco-auditing-tool/foreni-packages/cisco-auditing-tool
#./cisco-torch.pl" >> $EXECUTEABLE2
chmod +x $GITREPOROOT/$EXECUTEABLE1
#chmod +x $GITREPOROOT/$EXECUTEABLE2
sudo ln -s $GITREPOROOT/$EXECUTEABLE1 /usr/local/bin/$EXECUTEABLE2

