#!/bin/bash

#not working

bold=$(tput bold)
normal=$(tput sgr0)

echo "${bold}
 ____  _____ _____ _____ 
| __ )| ____| ____|  ___|
|  _ \|  _| |  _| | |_   
| |_) | |___| |___|  _|  
|____/|_____|_____|_|    
            
${normal}"


mkdir -p /opt/ITSEC/3.Exploitation-Tools/5.Social-Engineering/2.Phishing/beef/beefproject
cd /opt/ITSEC/3.Exploitation-Tools/5.Social-Engineering/2.Phishing/beef/beefproject
git clone https://github.com/beefproject/beef.git
#

sudo updatedb
sudo ldconfig
#
GITREPOROOT=/opt/ITSEC/3.Exploitation-Tools/5.Social-Engineering/2.Phishing/beef/beefproject/beef
#
DSKTPFLS=/opt/ITSEC-Install-Scripts/0.Initial/usrlcl/.local/share/applications/3.Exploitation-Tools/5.Social-Engineering/2.Phishing
DSKTPFLSDEST=/home/$USER/.local/share/applications/3.Exploitation-Tools/5.Social-Engineering/2.Phishing
DSKTPFL=beef.desktop


cd $GITREPOROOT

git clean -f
git fetch origin
git reset --hard origin/master
git pull
git submodule init
git submodule update --recursive
#
#rbenv local 2.4.0
#rbenv 2.4.1

gem install bundler

#bundle
bundle update
bundle install

sudo rm -f /usr/local/bin/beef
chmod +x beef
sudo ln -s $GITREPOROOT/beef /usr/local/bin/beef

mkdir -p $DSKTPFLSDEST
cp $DSKTPFLS/$DSKTPFL $DSKTPFLSDEST/$DSKTPFL
	

