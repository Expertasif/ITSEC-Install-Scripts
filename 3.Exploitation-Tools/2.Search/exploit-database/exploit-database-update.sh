#!/bin/bash

bold=$(tput bold)
normal=$(tput sgr0)

echo "${bold}
 _______  ______  _     ___ ___ _____     ____  ____  
| ____\ \/ /  _ \| |   / _ \_ _|_   _|   |  _ \| __ ) 
|  _|  \  /| |_) | |  | | | | |  | |_____| | | |  _ \ 
| |___ /  \|  __/| |__| |_| | |  | |_____| |_| | |_) |
|_____/_/\_\_|   |_____\___/___| |_|     |____/|____/ 
                 
${normal}"
GITREPOROOT=/opt/ITSEC/3.Exploitation-Tools/2.Search/exploit-database/offensive-security/exploit-database
GITREPOGITFILE=$GITREPOROOT/.git

if [ ! -d $GITREPOGITFILE ]

then

mkdir -p /opt/ITSEC/3.Exploitation-Tools/2.Search/exploit-database/offensive-security
cd /opt/ITSEC/3.Exploitation-Tools/2.Search/exploit-database/offensive-security
git clone https://github.com/offensive-security/exploit-database.git

else

echo "repo exists"

fi

cd $GITREPOROOT

if git diff-index --quiet HEAD --; then
    echo "UP TO DATE"

else

cd $GITREPOROOT
git clean -f
git fetch origin
git reset --hard origin/master
git pull

git submodule init
git submodule update --recursive

sed -i 's#/opt/exploit-database#/opt/ITSEC/3.Exploitation-Tools/2.Search/exploit-database/offensive-security/exploit-database#g' searchsploit

fi